<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目入口</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 背景图片容器 -->
    <div class="background-container">
        <img src="https://free.picui.cn/free/2026/01/21/6970d140b28c7.png" 
             alt="横版背景" class="background-image landscape-bg">
        <img src="https://free.picui.cn/free/2026/01/21/6970d48703e9e.webp" 
             alt="竖版背景" class="background-image portrait-bg">
    </div>
    
    <!-- 项目按钮容器 -->
    <div class="open-container">
        <div class="buttons-grid" id="buttons-container">
            <!-- 项目按钮将通过JavaScript动态生成 -->
        </div>
        
        <!-- 跳转到音乐播放器的提示 -->
        <div class="jump-to-music" id="jump-to-music">
            <div class="countdown" id="countdown">3秒后显示音乐按钮</div>
            <a href="music.html" class="kugou-btn" id="kugou-btn" style="display: none;">
                <i class="fas fa-music"></i> kugou
            </a>
        </div>
    </div>
    
    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script>
        // 初始化项目按钮
        function initializeProjectButtons() {
            const container = document.getElementById('buttons-container');
            container.innerHTML = '';
            
            PROJECTS.forEach(project => {
                const btn = document.createElement('a');
                
                if (project.url && project.url.trim() !== '') {
                    btn.href = project.url;
                    btn.target = "_blank";
                    btn.className = "project-btn";
                    btn.innerHTML = `
                        <i class="${project.icon}"></i>
                        <span>${project.name}</span>
                    `;
                } else {
                    btn.className = "project-btn hidden";
                }
                
                container.appendChild(btn);
            });
        }
        
        // 检查是否需要显示跳转提示
        function checkScrollForJump() {
            const container = document.querySelector('.open-container');
            const jumpSection = document.getElementById('jump-to-music');
            const countdownEl = document.getElementById('countdown');
            const kugouBtn = document.getElementById('kugou-btn');
            
            // 获取容器底部位置
            const containerBottom = container.getBoundingClientRect().bottom;
            // 获取视口高度
            const viewportHeight = window.innerHeight;
            
            // 如果容器底部已经在视口上方（即已经滚动到底部）
            if (containerBottom <= viewportHeight + 50) {
                // 显示跳转提示
                jumpSection.classList.add('show');
                
                // 开始倒计时
                let countdown = 3;
                countdownEl.textContent = `${countdown}秒后显示音乐按钮`;
                
                const countdownInterval = setInterval(() => {
                    countdown--;
                    if (countdown > 0) {
                        countdownEl.textContent = `${countdown}秒后显示音乐按钮`;
                    } else {
                        clearInterval(countdownInterval);
                        countdownEl.textContent = '音乐按钮已显示';
                        kugouBtn.style.display = 'inline-block';
                    }
                }, 1000);
                
                // 移除滚动监听，避免重复触发
                window.removeEventListener('scroll', checkScrollForJump);
            }
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化项目按钮
            initializeProjectButtons();
            
            // 设置背景图片
            if (typeof setBackgroundBasedOnOrientation === 'function') {
                setBackgroundBasedOnOrientation();
                
                // 监听窗口大小变化
                window.addEventListener('resize', setBackgroundBasedOnOrientation);
                window.addEventListener('orientationchange', setBackgroundBasedOnOrientation);
            }
            
            // 添加滚动监听
            window.addEventListener('scroll', checkScrollForJump);
            
            // 初始检查一次（如果页面高度小于视口高度）
            setTimeout(checkScrollForJump, 100);
        });
    </script>
</body>
</html>